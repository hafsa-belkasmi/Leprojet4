<template>
    <lightning-card title="Produits associés à l’opportunité">

        <!-- Affiche un message si aucun produit n'est présent -->
        <template if:true={noData}>
            <div class="slds-p-around_medium slds-text-color_weak">
                <p><strong>Vous n'avez aucune ligne de produits pour le moment.</strong></p>
                <p>1. Veuillez tout d'abord sélectionner un Catalogue (Pricebook)</p>
                <p>2. Sélectionnez ensuite les produits à ajouter</p>
            </div>
        </template>

        <!-- Affiche un message d’avertissement si des quantités dépassent le stock -->
        <template if:true={showQuantityWarning}>
            <div class="slds-box slds-theme_alert-texture slds-theme_warning slds-m-bottom_medium">
                <p>
                    Une ou plusieurs lignes de produits dépassent la quantité en stock.
                    Veuillez corriger ces lignes ou contacter votre administrateur système.
                </p>
            </div>
        </template>

        <!-- Affiche le tableau si des produits sont disponibles -->
        <template if:false={noData}>
            <lightning-datatable
                key-field="Id"
                data={opportunityRows}
                columns={columns}
                onrowaction={handleRowAction}>
            </lightning-datatable>
        </template>
        
    </lightning-card>
</template>
